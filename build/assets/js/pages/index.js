document.addEventListener("DOMContentLoaded",function(e){jQuery.noConflict(),function(i,o){"use strict";var e;firebase.auth().onAuthStateChanged(function(e){e&&(window.location="/pages/activities.html")}),e=window.Japan.Login=window.Japan.Login||{},(e=function(e){this.cfg=o.extend({selectors:{google_login:".login--google [data-google-login]",email_login:".login--email [data-email-login]",login_email:".login--wrapper [data-login-email]",login_password:".login--wrapper [data-login-password]",error_text:".error--text",error_wrapper:".error--wrapper",error_close:".close--error"}}),this.getDOMRefs(),this.bindHandlers()}).prototype.getDOMRefs=function(){this.$dom=this.$dom||{},o.forOwn(this.cfg.selectors,function(e,o){this.$dom[o]=i(e),this.$dom[o].length||this.handlerShowError("Login Developer Warning: Selected element not found")}.bind(this))},e.prototype.bindHandlers=function(){this.$dom.google_login.on("click",this.handlerGoogleLogin.bind(this)),this.$dom.email_login.on("click",this.handlerEmailLogin.bind(this)),this.$dom.error_close.on("click",this.handlerCloseError.bind(this))},e.prototype.handlerGoogleLogin=function(){firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){var e=new firebase.auth.GoogleAuthProvider;firebase.auth().signInWithPopup(e).catch(function(e){this.handlerShowError(e.message)}.bind(this))}.bind(this)).catch(function(e){this.handlerShowError(e.message)}.bind(this))},e.prototype.handlerEmailLogin=function(e){e.preventDefault();var o=this.$dom.login_email.val(),i=this.$dom.login_password.val();firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){firebase.auth().signInWithEmailAndPassword(o,i).catch(function(e){this.handlerShowError(e.message)}.bind(this))}.bind(this)).catch(function(e){this.handlerShowError(e.message)}.bind(this))},e.prototype.handlerCloseError=function(){this.$dom.error_wrapper.hide("slow")},e.prototype.handlerShowError=function(e){this.$dom.error_text.text(e),this.$dom.error_wrapper.show("slow")},new e}(window.jQuery,window._)});